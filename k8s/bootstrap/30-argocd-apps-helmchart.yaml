apiVersion: helm.cattle.io/v1
kind: HelmChart
metadata:
  name: argocd-apps
  namespace: kube-system
spec:
  chart: argocd-apps
  repo: https://argoproj.github.io/argo-helm
  targetNamespace: argo-cd
  valuesContent: |-
    applications:
      apps:
        namespace: argo-cd
        project: default
        source:
          repoURL: git@github.com:kazu728/homelab.git
          targetRevision: HEAD
          path: k8s/argocd/apps
        destination:
          server: https://kubernetes.default.svc
          namespace: argo-cd
        syncPolicy:
          automated:
            prune: true
            selfHeal: true
          syncOptions:
            - CreateNamespace=true
